<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Unbounded:wght@600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="./LoanForm_page.css">
    <link rel="stylesheet" href="./HomePage/Homepage_css.css">
    <title>Loan Application Form</title>
</head>
<body>


    <div class="form-container">
        <a href="#" class="back-link" id="backLink" style="display: none;">BACK</a>

        <div class="form-header">
            <a href="../index.html">
            <img src="../HomePage/AgriLuntian_logo.png" alt="Company Logo" class="logo-img">
            </a>
            <h1>LOAN FORM</h1>
        </div>

        <div class="progress-bar-container">
            <ul class="progress-steps">
                <li class="step" data-step="1">
                    <div class="step-circle">
                        <span class="step-number">1</span>
                        <i class="fas fa-check check-icon"></i>
                    </div>
                    <span class="step-label">Personal Information</span>
                </li>
                <li class="step" data-step="2">
                    <div class="step-circle">
                        <span class="step-number">2</span>
                        <i class="fas fa-check check-icon"></i>
                    </div>
                    <span class="step-label">Loan Application Details</span>
                </li>
                <li class="step" data-step="3">
                    <div class="step-circle">
                        <span class="step-number">3</span>
                        <i class="fas fa-check check-icon"></i>
                    </div>
                    <span class="step-label">Supporting Documents</span>
                </li>
            </ul>
            <div class="progress-line">
                <div class="progress-fill"></div>
            </div>
        </div>

        <div class="form-content">
            <div class="step-content active" data-step="1">
                <div class="form-row form-row-three-cols">
                    <div class="form-group">
                        <label for="firstName">FIRST NAME</label>
                        <input type="text" id="firstName" name="firstName" placeholder="">
                    </div>
                    <div class="form-group">
                        <label for="lastName">LAST NAME</label>
                        <input type="text" id="lastName" name="lastName" placeholder="">
                    </div>
                    <div class="form-group">
                        <label for="mi">MI.</label>
                        <input type="text" id="mi" name="mi" placeholder="">
                    </div>
                </div>
                <div class="form-row form-row-two-cols">
                    <div class="form-group">
                        <label for="age">AGE</label>
                        <input type="number" id="age" name="age" placeholder="">
                    </div>
                    <div class="form-group">
                        <label for="gender">GENDER</label>
                        <select id="gender" name="gender">
                            <option value="">Select</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="phoneNumber">PHONE NUMBER</label>
                        <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="">
                    </div>
                </div>
                <div class="form-group">
                    <label for="permanentAddress">PERMANENT ADDRESS</label>
                    <input type="text" id="permanentAddress" name="permanentAddress" placeholder="">
                </div>
                <div class="form-group">
                    <label for="presentAddress">PRESENT ADDRESS</label>
                    <input type="text" id="presentAddress" name="presentAddress" placeholder="">
                </div>
                
                <div class="form-footer">
                    <button type="button" class="btn btn-next">NEXT</button>
                </div>
            </div>

            <div class="step-content" data-step="2">
                <div class="form-row form-row-two-cols">
                    <div class="form-group">
                        <label for="selectOption">SELECT OPTION (SEEDS, LAND, SOIL, ETC.)</label>
                        <select id="selectOption" name="selectOption">
                            <option value="">Select an option</option>
                            <option value="seeds">Seeds</option>
                            <option value="land">Land</option>
                            <option value="soil">Soil</option>
                            <option value="other_option">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="farmSize">FARM SIZE (in m²)</label>
                        <input type="number" id="farmSize" name="farmSize" placeholder="">
                    </div>
                </div>
                <div class="form-group">
                    <label for="loanAddress">ADDRESS</label>
                    <input type="text" id="loanAddress" name="loanAddress" placeholder="">
                </div>
                <div class="form-row form-row-two-cols">
                    <div class="form-group">
                        <label for="province">PROVINCE</label>
                        <input type="text" id="province" name="province" placeholder="">
                    </div>
                    <div class="form-group">
                        <label for="loanAmountRequested">LOAN AMOUNT REQUESTED (₱)</label>
                        <input type="number" id="loanAmountRequested" name="loanAmountRequested" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label>PREFERRED REPAYMENT</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="checkbox" id="repayment3Months" name="repaymentOption" value="3_months">
                            <label for="repayment3Months">3 MONTHS</label>
                        </div>
                        <div class="radio-option">
                            <input type="checkbox" id="repayment6Months" name="repaymentOption" value="6_months">
                            <label for="repayment6Months">6 MONTHS</label>
                        </div>
                        <div class="radio-option">
                            <input type="checkbox" id="repayment12Months" name="repaymentOption" value="12_months">
                            <label for="repayment12Months">12 MONTHS</label>
                        </div>
                        <div class="radio-option">
                            <input type="checkbox" id="repaymentOthers" name="repaymentOption" value="others">
                            <label for="repaymentOthers">OTHERS:</label>
                            <input type="text" id="repaymentOthersInput" name="repaymentOthersInput" style="width: 100px; margin-left: 5px; display: inline-block;">
                        </div>
                    </div>
                </div>

                <div class="form-footer">
                    <button type="button" class="btn btn-next">NEXT</button>
                </div>
            </div>

            <div class="step-content" data-step="3">
                <div class="form-group">
                    <label>VALID ID</label>
                    <div class="file-upload">
                        <span class="file-upload-placeholder">DRAG OR DROP FILES HERE</span>
                        <input type="file" id="validIdUpload" name="validIdUpload" accept=".pdf,.jpg,.png" style="display: none;">
                    </div>
                </div>
                <div class="form-group">
                    <label>PROOF OF LAND OWNERSHIP</label>
                    <div class="file-upload">
                        <span class="file-upload-placeholder">DRAG OR DROP FILES HERE</span>
                        <input type="file" id="landOwnershipUpload" name="landOwnershipUpload" accept=".pdf,.jpg,.png" style="display: none;">
                    </div>
                </div>
                <div class="form-group">
                    <label>PREVIOUS LOAN HISTORY</label>
                    <div class="file-upload">
                        <span class="file-upload-placeholder">DRAG OR DROP FILES HERE</span>
                        <input type="file" id="loanHistoryUpload" name="loanHistoryUpload" accept=".pdf,.jpg,.png" style="display: none;">
                    </div>
                </div>

                <div class="form-footer">
                    <button type="submit" class="btn btn-submit">SUBMIT</button>
                </div>
            </div>
        </div>

        <div class="success-message" style="display: none;">
            <i class="fas fa-check-circle success-icon"></i> <h2>Application Submitted Successfully!</h2>
            <p>Thank you for submitting your loan application. We will review your details and get back to you shortly.</p>
            <p>For any inquiries, please contact us.</p>
            <div class="success-actions">
                <button type="button" class="btn btn-secondary" id="submitAnotherBtn">SUBMIT ANOTHER</button>
                <a href="../index.html"><button type="button" class="btn btn-primary" id="goHomeBtn">GO BACK TO HOME PAGE</button>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const steps = document.querySelectorAll('.progress-steps .step');
            const stepContents = document.querySelectorAll('.form-content .step-content');
            const nextButtons = document.querySelectorAll('.btn-next');
            const progressFill = document.querySelector('.progress-fill');
            const backLink = document.getElementById('backLink');

            const formContent = document.querySelector('.form-content');
            const successMessage = document.querySelector('.success-message');
            const progressBarContainer = document.querySelector('.progress-bar-container');

            // NEW: References to the new buttons
            const submitAnotherBtn = document.getElementById('submitAnotherBtn');
            const goHomeBtn = document.getElementById('goHomeBtn');


            let currentStepIndex = 0; // Starts at 0, representing the first step

            function updateProgressBar() {
                steps.forEach((step, index) => {
                    step.classList.remove('active', 'completed');
                    if (index < currentStepIndex) {
                        step.classList.add('completed');
                    } else if (index === currentStepIndex) {
                        step.classList.add('active');
                    }
                });

                stepContents.forEach((content, index) => {
                    if (index === currentStepIndex) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });

                // Update progress line fill
                const percentage = (currentStepIndex / (steps.length - 1)) * 100;
                progressFill.style.width = `${percentage}%`;

                // Show/hide back link
                if (currentStepIndex > 0) {
                    backLink.style.display = 'block';
                } else {
                    backLink.style.display = 'none';
                }
            }

            // NEW: Function to reset all form fields
            function resetFormFields() {
                formContent.querySelectorAll('input, select, textarea').forEach(field => {
                    if (field.type === 'checkbox' || field.type === 'radio') {
                        field.checked = false;
                    } else if (field.tagName === 'SELECT') {
                        field.selectedIndex = 0; // Reset select to first option
                    } else {
                        field.value = ''; // Clear text, number, tel, etc.
                    }
                });

                // Reset file upload placeholders
                document.querySelectorAll('.file-upload .file-upload-placeholder').forEach(span => {
                    span.textContent = 'DRAG OR DROP FILES HERE';
                });

                // Ensure 'others' input for repayment is hidden and cleared
                const repaymentOthersCheckbox = document.getElementById('repaymentOthers');
                const repaymentOthersInput = document.getElementById('repaymentOthersInput');
                if (repaymentOthersCheckbox && repaymentOthersInput) {
                    repaymentOthersInput.style.display = 'none';
                    repaymentOthersInput.value = '';
                    repaymentOthersCheckbox.checked = false; // Uncheck the "OTHERS" checkbox
                }
            }


            // Initialize the form state
            updateProgressBar();

            nextButtons.forEach(button => {
                button.addEventListener('click', () => {
                    if (currentStepIndex < steps.length - 1) {
                        currentStepIndex++;
                        updateProgressBar();
                    }
                });
            });

            backLink.addEventListener('click', (event) => {
                event.preventDefault();
                if (currentStepIndex > 0) {
                    currentStepIndex--;
                    updateProgressBar();
                }
            });

            // Handle submit button
            const submitButton = document.querySelector('.btn-submit');
            if (submitButton) {
                submitButton.addEventListener('click', (event) => {
                    event.preventDefault();

                    formContent.style.display = 'none';
                    progressBarContainer.style.display = 'none';
                    backLink.style.display = 'none';

                    // Show the success message (set its display property to flex to allow vertical centering)
                    successMessage.style.display = 'flex';
                });
            }

            // NEW: Event listener for "SUBMIT ANOTHER" button
            if (submitAnotherBtn) {
                submitAnotherBtn.addEventListener('click', () => {
                    successMessage.style.display = 'none'; // Hide success message
                    formContent.style.display = 'block'; // Show form content
                    progressBarContainer.style.display = 'block'; // Show progress bar

                    currentStepIndex = 0; // Reset to first step
                    resetFormFields(); // Clear all input values
                    updateProgressBar(); // Update progress bar to first step
                });
            }

            // NEW: Event listener for "GO BACK TO HOME PAGE" button
            if (goHomeBtn) {
                goHomeBtn.addEventListener('click', () => {
                    // Replace 'index.html' with the actual path to your home page
                    window.location.href = 'index.html'; 
                });
            }


            // File upload interaction
            document.querySelectorAll('.file-upload').forEach(uploadDiv => {
                const input = uploadDiv.querySelector('input[type="file"]');
                const placeholderSpan = uploadDiv.querySelector('.file-upload-placeholder');

                uploadDiv.addEventListener('click', () => input.click());
                input.addEventListener('change', () => {
                    if (input.files.length > 0) {
                        placeholderSpan.textContent = `File selected: ${input.files[0].name}`;
                    } else {
                        placeholderSpan.textContent = `DRAG OR DROP FILES HERE`;
                    }
                });
            });

            // Optional: Toggle "OTHERS" input for repayment
            const repaymentOthersCheckbox = document.getElementById('repaymentOthers');
            const repaymentOthersInput = document.getElementById('repaymentOthersInput');
            if (repaymentOthersCheckbox && repaymentOthersInput) {
                repaymentOthersInput.style.display = repaymentOthersCheckbox.checked ? 'inline-block' : 'none';
                repaymentOthersCheckbox.addEventListener('change', () => {
                    repaymentOthersInput.style.display = repaymentOthersCheckbox.checked ? 'inline-block' : 'none';
                    if (!repaymentOthersCheckbox.checked) {
                        repaymentOthersInput.value = ''; // Clear input if checkbox is unchecked
                    }
                });
            }
        });
    </script>
</body>
</html>
